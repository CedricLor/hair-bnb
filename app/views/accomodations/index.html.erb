
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-md-6">
      <h1>Accomodations#index</h1>
      <% @accomodations.each do | accomodation | %>
        <div>
          <p><%= link_to(accomodation.description, accomodation_path(accomodation)) %></p>
          <p><%= "#{accomodation.night_rate}â‚¬" %></p>
        </div>
      <% end %>
    </div>
    <div class="col-xs-12 col-md-6">
      <!-- placeholder for the map -->
      <div id="map" style="width: 100%; height: 600px;"></div>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
 <%= javascript_tag do %>
   $(document).on('ready', function() {
     handler = Gmaps.build('Google');
     handler.buildMap({ internal: { id: 'map' } }, function(){
       markers = handler.addMarkers(<%= raw @markers.to_json %>);
       handler.bounds.extendWith(markers);
       handler.fitMapToBounds();
     });
   })
 <% end %>
<% end %>
