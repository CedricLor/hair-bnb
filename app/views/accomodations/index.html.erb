<div class="container">
  <div class="row">
    <div class="col-xs-12 col-md-6">
      <h1>List of flats around you...</h1>
      <% @accomodations.each do | accomodation | %>
        <div class="col-md-6 flat">
          <%= image_tag("flat_1.jpg", height: '180', width: '250') %>
          <p>
            <%= link_to(accomodation.description, accomodation_path(accomodation)) %>
          </p>
          <p><span>â‚¬ </span><%= accomodation.night_rate %></p>
        </div>
      <% end %>
    </div>
    <div class="col-xs-12 col-md-6">
      <!-- placeholder for the map -->
      <div id="map" style="width: 100%; height: 600px;"></div>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
 <%= javascript_tag do %>
   $(document).on('ready', function() {
     handler = Gmaps.build('Google');
     handler.buildMap({ internal: { id: 'map' } }, function(){
       markers = handler.addMarkers(<%= raw @markers.to_json %>);
       handler.bounds.extendWith(markers);
       handler.fitMapToBounds();
     });
   })
 <% end %>
<% end %>
